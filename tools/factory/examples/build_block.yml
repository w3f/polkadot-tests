- vars:
    spec_version: 1
    transaction_version: 1
    genesis_hash: "0x70e03454cf8f9056fdf7c9a9c9921444017f0515712283e2498f5a2331cb638a"

- name: Extrinsics with loops
  pallet_balances:
    transfer:
      from: "{{ item.from }}"
      to: "{{ item.to }}"
      balance: "{{ item.balance }}"
      nonce: "{{ item.nonce }}"
      extra_signed:
        spec_version: "{{ spec_version }}"
        transaction_version: "{{ transaction_version }}"
        genesis_hash: "{{ genesis_hash }}"
  loop:
    - { from: alice, to: bob, balance: 100, nonce: 0 }
    - { from: bob, to: alice, balance: 200, nonce: 0 }
    - { from: bob, to: eve, balance: 300, nonce: 1 }
  register: transactions

- name: Build block
  block:
    build:
      header:
        parent_block:
          genesis_hash
        number: "0x1"
        digest:
          logs: []
      extrinsics: "{{ transactions }}"
